models:
    DEPRECATED_UPCONV_FORMAT____ResUNet32:
        class: sparseconv3d.APIModel
        conv_type: "SPARSE"
        backend: "torchsparse"
        backbone:
            define_constants:
                in_feat: 32
                block: ResBlock # Can be any of the blocks in modules/MinkowskiEngine/api_modules.py
            down_conv:
                module_name: ResNetDown
                block: block
                N: [0, 1, 2, 2, 3]
                down_conv_nn:
                    [
                        [FEAT, in_feat],
                        [in_feat, in_feat],
                        [in_feat, 2*in_feat],
                        [2*in_feat, 4*in_feat],
                        [4*in_feat, 8*in_feat],
                    ]
                kernel_size: 3
                stride: [1, 2, 2, 2, 2]
            up_conv:
                block: block
                module_name: ResNetUp
                N: [1, 1, 1, 1, 0]
                up_conv_nn:
                    [
                        [8*in_feat, 4*in_feat],
                        [4*in_feat + 4*in_feat, 4*in_feat],
                        [4*in_feat + 2*in_feat, 3*in_feat],
                        [3*in_feat + in_feat, 3*in_feat],
                        [3*in_feat + in_feat, 3*in_feat],
                    ]
                kernel_size: 3
                stride: [2, 2, 2, 2, 1]

    DEPRECATED_UPCONV_FORMAT____Res16UNet34:
        class: sparseconv3d.APIModel
        conv_type: "SPARSE"
        backend: "torchsparse"
        backbone:
            define_constants:
                in_feat: 32
                block: ResBlock # Can be any of the blocks in modules/MinkowskiEngine/api_modules.py
            down_conv:
                module_name: ResNetDown
                block: block
                N: [0, 2, 3, 4, 6]
                down_conv_nn:
                    [
                        [FEAT, in_feat],
                        [in_feat, in_feat],
                        [in_feat, 2*in_feat],
                        [2*in_feat, 4*in_feat],
                        [4*in_feat, 8*in_feat],
                    ]
                kernel_size: 3
                stride: [1, 2, 2, 2, 2]
            up_conv:
                block: block
                module_name: ResNetUp
                N: [1, 1, 1, 1, 1]
                up_conv_nn:
                    [
                        [8*in_feat, 4*in_feat],
                        [4*in_feat + 4*in_feat, 4*in_feat],
                        [4*in_feat + 2*in_feat, 3*in_feat],
                        [3*in_feat + in_feat, 3*in_feat],
                        [3*in_feat + in_feat, 3*in_feat],
                    ]
                kernel_size: 3
                stride: [2, 2, 2, 2, 1]

    Res16UNet21-12:
        # 19.8 M params - 77.2 Mo on the GPU
        class: sparseconv3d.APIModel
        conv_type: "SPARSE"
        backend: "torchsparse"
        backbone:
            define_constants:
                in_feat: 32
                block: ResBlock # Can be any of the blocks in modules/MinkowskiEngine/api_modules.py
            down_conv:
                module_name: ResNetDown
                block: block
                N: [ 0, 2, 2, 2, 2 ]
                kernel_size: [ 3, 4, 4, 4, 4 ]
                stride: [ 1, 2, 2, 2, 2 ]
                down_conv_nn:
                    [
                        [ FEAT, in_feat ],
                        [ in_feat, in_feat ],
                        [ in_feat, 2*in_feat ],
                        [ 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, 8*in_feat ],
                    ]
            up_conv:
                block: block
                module_name: ResNetUp
                N: [ 1, 1, 1, 1 ]
                kernel_size: [ 4, 4, 4, 4 ]
                stride: [ 2, 2, 2, 2 ]
                up_conv_nn:
                    [
                        [ 8*in_feat, 4*in_feat, 4*in_feat ],
                        [ 4*in_feat, 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, in_feat, 2*in_feat ],
                        [ 2*in_feat, in_feat, in_feat ],
                    ]

    Res16UNet21-15:
        # 20.0 M params - 77.8 Mo on the GPU
        class: sparseconv3d.APIModel
        conv_type: "SPARSE"
        backend: "torchsparse"
        backbone:
            define_constants:
                in_feat: 32
                block: ResBlock
            down_conv:
                module_name: ResNetDown
                block: block
                N: [ 0, 2, 2, 2, 2 ]
                kernel_size: [ 3, 4, 4, 4, 4 ]
                stride: [ 1, 2, 2, 2, 2 ]
                down_conv_nn:
                    [
                        [ FEAT, in_feat ],
                        [ in_feat, in_feat ],
                        [ in_feat, 2*in_feat ],
                        [ 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, 8*in_feat ],
                    ]
            up_conv:
                block: block
                module_name: ResNetUp
                N: [ 1, 1, 1, 1, 1 ]
                kernel_size: [ 4, 4, 4, 4, 3 ]
                stride: [ 2, 2, 2, 2, 1 ]
                up_conv_nn:
                    [
                        [ 8*in_feat, 4*in_feat, 4*in_feat ],
                        [ 4*in_feat, 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, in_feat, 2*in_feat ],
                        [ 2*in_feat, in_feat, 2*in_feat ],
                        [ 2*in_feat, 0, in_feat ],
                    ]

    Res16UNet13-12:
        # 15.0 M params - 59.1 Mo on the GPU
        class: sparseconv3d.APIModel
        conv_type: "SPARSE"
        backend: "torchsparse"
        backbone:
            define_constants:
                in_feat: 32
                block: ResBlock
            down_conv:
                module_name: ResNetDown
                block: block
                N: [ 0, 1, 1, 1, 1 ]
                kernel_size: [ 3, 4, 4, 4, 4 ]
                stride: [ 1, 2, 2, 2, 2 ]
                down_conv_nn:
                    [
                        [ FEAT, in_feat ],
                        [ in_feat, in_feat ],
                        [ in_feat, 2*in_feat ],
                        [ 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, 8*in_feat ],
                    ]
            up_conv:
                block: block
                module_name: ResNetUp
                N: [ 1, 1, 1, 1 ]
                kernel_size: [ 4, 4, 4, 4 ]
                stride: [ 2, 2, 2, 2 ]
                up_conv_nn:
                    [
                        [ 8*in_feat, 4*in_feat, 4*in_feat ],
                        [ 4*in_feat, 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, in_feat, 2*in_feat ],
                        [ 2*in_feat, in_feat, in_feat ],
                    ]

    Res16UNet13-15:
        # 15.3 M params - 59.8 Mo on the GPU
        class: sparseconv3d.APIModel
        conv_type: "SPARSE"
        backend: "torchsparse"
        backbone:
            define_constants:
                in_feat: 32
                block: ResBlock
            down_conv:
                module_name: ResNetDown
                block: block
                N: [ 0, 1, 1, 1, 1 ]
                kernel_size: [ 3, 4, 4, 4, 4 ]
                stride: [ 1, 2, 2, 2, 2 ]
                down_conv_nn:
                    [
                        [ FEAT, in_feat ],
                        [ in_feat, in_feat ],
                        [ in_feat, 2*in_feat ],
                        [ 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, 8*in_feat ],
                    ]
            up_conv:
                block: block
                module_name: ResNetUp
                N: [ 1, 1, 1, 1, 1 ]
                kernel_size: [ 4, 4, 4, 4, 3 ]
                stride: [ 2, 2, 2, 2, 1 ]
                up_conv_nn:
                    [
                        [ 8*in_feat, 4*in_feat, 4*in_feat ],
                        [ 4*in_feat, 2*in_feat, 4*in_feat ],
                        [ 4*in_feat, in_feat, 2*in_feat ],
                        [ 2*in_feat, in_feat, 2*in_feat ],
                        [ 2*in_feat, 0, in_feat ],
                    ]
