<div class="preview__inner-2" style="padding: 10px 25px 442px;"><div class="cl-preview-section"><h1 id="remote-pycharm">Remote pycharm</h1>
</div><div class="cl-preview-section"><h3 id="remote-pycharm-interpreter">Remote pycharm interpreter</h3>
</div><div class="cl-preview-section"><p>Setup remote python interpreter in pycharm by following the instructions :<br>
<a href="https://docs.google.com/presentation/d/1tKS1EgrBVoepAc-sIs0au3AVt5AiktvV8hq30IXUK38/edit#slide=id.g7245a3112b_19_0">https://docs.google.com/presentation/d/1tKS1EgrBVoepAc-sIs0au3AVt5AiktvV8hq30IXUK38/edit#slide=id.g7245a3112b_19_0</a></p>
</div><div class="cl-preview-section"><h3 id="remote-conda-activation">Remote conda activation</h3>
</div><div class="cl-preview-section"><p>Unfortunately, this will not suffice. Pycharm can use the remote python interpreter but will not activate the conda environment. If you want to make use of the remote conda environment on the host machine, you need to make pycharm point to a script that activates the environment and launches python.</p>
</div><div class="cl-preview-section"><p>For explanations on how to set this up :<br>
<a href="https://youtrack.jetbrains.com/issue/PY-35978">https://youtrack.jetbrains.com/issue/PY-35978</a></p>
</div><div class="cl-preview-section"><p>I set up my script <code>/home/ign.fr/drobert-admin/projects/torch-points3d/python_for_remote_pycharm_conda</code> and added this script to my <code>.gitignore</code>, as it only is needed on the host IGN machine.</p>
</div><div class="cl-preview-section"><p>My script looks like :</p>
</div><div class="cl-preview-section"><pre><code>#!/usr/bin/env bash
source /home/ign.fr/drobert/anaconda3/etc/profile.d/conda.sh
conda activate tp3d
python "$@"
</code></pre>
</div><div class="cl-preview-section"><p>This should let you use the conda environment as desired from the remote pycharm.</p>
</div><div class="cl-preview-section"><h3 id="remote-jupyter-notebook">Remote jupyter notebook</h3>
</div><div class="cl-preview-section"><p>By default pycharm will try to use whatever <code>jupyter</code> it can find. But to use a notebook that runs on the IGN host, you better set it up explicitely.</p>
</div><div class="cl-preview-section"><p>The following instructions are based on :<br>
<a href="https://coderwall.com/p/ohk6cg/remote-access-to-ipython-notebooks-via-ssh">https://coderwall.com/p/ohk6cg/remote-access-to-ipython-notebooks-via-ssh</a><br>
and<br>
<a href="https://www.howtogeek.com/671422/how-to-use-tmux-on-linux-and-why-its-better-than-screen/">https://www.howtogeek.com/671422/how-to-use-tmux-on-linux-and-why-its-better-than-screen/</a></p>
</div><div class="cl-preview-section"><p>First, launch a jupyter lab on the host IGN machine inside a tmux, so that it will wonâ€™t stop when you close the session :</p>
</div><div class="cl-preview-section"><pre><code>ssh ign                                           # connect to remote IGN host
tmux new -s lab                                   # start a tmux session called 'lab'
conda activate tp3d                               # activate the tp3d environment
jupyter lab --no-browser --port=9000              # start jupyter from inside the env (required for plotly in notebooks)
CTRL+B + D                                        # detach the tmux session
jupyter notebook list                             # get the token for the notebook you launched
exit                                              # leave the IGN ssh session
ssh -N -f -L localhost:9000:localhost:9000 ign    # open ssh tunnel to notebook port
</code></pre>
</div><div class="cl-preview-section"><p>Then set up the jupyter server to <code>localhost:9000</code> and the identified token by following the instructions :<br>
<a href="https://www.jetbrains.com/help/pycharm/configuring-jupyter-notebook.html#configure-server">https://www.jetbrains.com/help/pycharm/configuring-jupyter-notebook.html#configure-server</a></p>
</div><div class="cl-preview-section"><p>With this, you should be able to run jupyter remotely from pycharm.</p>
</div><div class="cl-preview-section"><p>Note that the jupyter lab is also accessible in the browser of your local machines at <code>localhost:9000</code>.</p>
</div><div class="cl-preview-section"><p>To access the tmux session again :</p>
</div><div class="cl-preview-section"><pre><code>ssh ign
tmux list-sessions
tmux attach-session -t lab
</code></pre>
</div></div>